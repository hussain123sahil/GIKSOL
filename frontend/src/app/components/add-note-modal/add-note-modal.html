<div class="modal-overlay" (click)="onOverlayClick($event)">
  <div class="modal">
    <ng-container *ngIf="!showSuccessMessage; else successTpl">
      <div class="modal-header">
        <h3>Add Note</h3>
        <button class="close-btn" (click)="closeModal()">✖</button>
      </div>

      <div class="modal-body">
        <label class="label">Note to student</label>
        <textarea class="textarea" [(ngModel)]="noteText" placeholder="Write a note that the student will see..." rows="6" maxlength="500"></textarea>
        <div class="char-count">{{ noteText.length }}/500</div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-outline" (click)="closeModal()">Cancel</button>
        <button class="btn btn-primary" [disabled]="isSaving" (click)="saveNote()">
          {{ isSaving ? 'Saving...' : 'Save Note' }}
        </button>
      </div>
    </ng-container>

    <ng-template #successTpl>
      <div class="modal-header">
        <h3>Success</h3>
      </div>
      <div class="modal-body">
        <div class="success-panel">
          <div class="success-icon">✅</div>
          <div class="success-text">
            <div class="title">Note added successfully</div>
            <div class="subtitle">Your note will be visible to the student in their upcoming sessions.</div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" (click)="closeSuccess()">OK</button>
      </div>
    </ng-template>
  </div>
</div>


