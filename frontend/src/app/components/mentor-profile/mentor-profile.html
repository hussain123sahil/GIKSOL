<!-- Own Profile with Sidebar -->
<div class="mentor-profile-shell" *ngIf="isOwnProfile">
	<app-mentor-sidebar class="sidebar-pane" (navigate)="router.navigate([$event])"></app-mentor-sidebar>
	<div class="mentor-profile-container main-pane">
		<div class="profile-content">
			<div class="container">
				<h1 class="page-title">My Profile</h1>
				
				<!-- Loading State -->
				<div *ngIf="isLoading" class="loading-state">
					<div class="loading-spinner"></div>
					<p>Loading your profile...</p>
				</div>

				<!-- LinkedIn-style Mentor Profile -->
				<div *ngIf="!isLoading && mentor" class="linkedin-profile">
					<!-- Profile Header -->
					<div class="profile-header">
						<div class="cover-photo">
						</div>
						<div class="profile-info">
							<div class="profile-avatar">
								<img [src]="mentor.profilePicture" [alt]="mentor.firstName + ' ' + mentor.lastName" *ngIf="mentor.profilePicture">
								<span *ngIf="!mentor.profilePicture">{{ mentor.firstName.charAt(0) }}{{ mentor.lastName.charAt(0) }}</span>
							</div>
							<div class="profile-details">
								<h1 class="profile-name">{{ mentor.firstName }} {{ mentor.lastName }}</h1>
								<p class="profile-title">{{ mentor.position }} at {{ mentor.company }}</p>
								<div class="profile-stats">
									<div class="stat">
										<span class="stat-value">⭐ {{ mentor.rating }}</span>
										<span class="stat-label">Rating</span>
									</div>
									<div class="stat">
										<span class="stat-value">{{ mentor.totalSessions }}</span>
										<span class="stat-label">Sessions</span>
									</div>
									<div class="stat">
										<span class="stat-value">₹{{ mentor.hourlyRate }}/hr</span>
										<span class="stat-label">Rate</span>
									</div>
								</div>
								<div class="profile-actions">
									<button class="btn-primary" (click)="openEditProfileModal()">
										<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
											<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
											<path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
										</svg>
										Edit Profile
									</button>
								</div>
							</div>
						</div>
					</div>

					<!-- Main Content Grid -->
					<div class="profile-content-grid">
						<!-- Left Column -->
						<div class="profile-left">
							<!-- About Section -->
							<div class="profile-card">
								<h2>About</h2>
								<p>{{ mentor.bio }}</p>
							</div>

							<!-- Experience Section -->
							<div class="profile-card">
								<h2>Experience</h2>
								<div class="experience-item">
									<div class="experience-header">
										<h3>{{ mentor.position }}</h3>
										<p class="company">{{ mentor.company }}</p>
										<p class="duration">Current</p>
									</div>
								</div>
							</div>

							<!-- Education Section -->
							<div class="profile-card" *ngIf="mentor.education && mentor.education.length > 0">
								<h2>Education</h2>
								<div class="education-list">
									<div class="education-item" *ngFor="let edu of mentor.education">
										<h3>{{ edu.degree }}</h3>
										<p class="institution">{{ edu.institution }}</p>
										<p class="year">{{ edu.year }}</p>
									</div>
								</div>
							</div>

							<!-- Certifications Section -->
							<div class="profile-card" *ngIf="mentor.certifications && mentor.certifications.length > 0">
								<h2>Licenses & Certifications</h2>
								<div class="certifications-list">
									<div class="certification-item" *ngFor="let cert of mentor.certifications">
										<h3>{{ cert.name }}</h3>
										<p class="issuer">{{ cert.issuer }}</p>
										<p class="date">{{ cert.date }}</p>
									</div>
								</div>
							</div>
						</div>

						<!-- Right Column -->
						<div class="profile-right">
							<!-- Skills Section -->
							<div class="profile-card">
								<h2>Skills</h2>
								<div class="skills-list">
									<span class="skill-tag" *ngFor="let skill of mentor.expertise">
										{{ skill }}
									</span>
								</div>
							</div>

							<!-- Availability Section -->
							<div class="profile-card">
								<h2>Availability</h2>
								<div class="availability-info">
									<p class="availability-status" [class.available]="mentor.isAvailable">
										{{ mentor.isAvailable ? 'Available for sessions' : 'Currently unavailable' }}
									</p>
									<div class="availability-calendar">
										<div class="day" *ngFor="let day of getAvailabilityDays()">
											<span class="day-name">{{ day.name }}</span>
											<div class="day-time" [class.available]="day.available">
												<div *ngIf="day.available && day.timeSlots.length > 0" class="time-slots">
													<div *ngFor="let slot of day.timeSlots" class="time-slot">
														{{ formatTime(slot.startTime) }} - {{ formatTime(slot.endTime) }}
													</div>
												</div>
												<span *ngIf="!day.available" class="not-available">Not Available</span>
											</div>
										</div>
									</div>
								</div>
							</div>

							<!-- Contact Section -->
							<div class="profile-card" *ngIf="mentor.linkedinUrl">
								<h2>Contact</h2>
								<div class="contact-info">
									<a [href]="mentor.linkedinUrl" target="_blank" class="linkedin-link">
										<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
											<path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
										</svg>
										View LinkedIn Profile
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Public Profile (Viewing Other Mentors) -->
<div class="mentor-profile-shell" *ngIf="!isOwnProfile">
  <app-sidebar class="sidebar-pane" (navigate)="router.navigate([$event])"></app-sidebar>
  <div class="mentor-profile-container main-pane">
    <div class="profile-content">
      <div class="container">
      <!-- Loading State -->
      <div *ngIf="isLoading" class="loading-state">
        <div class="loading-spinner"></div>
        <p>Loading mentor profile...</p>
      </div>

      <!-- LinkedIn-style Mentor Profile -->
      <div *ngIf="!isLoading && mentor" class="linkedin-profile">
        <!-- Profile Header -->
        <div class="profile-header">
          <div class="cover-photo"></div>
          <div class="profile-info">
            <div class="profile-avatar">
              <img [src]="mentor.profilePicture" [alt]="mentor.firstName + ' ' + mentor.lastName" *ngIf="mentor.profilePicture">
              <span *ngIf="!mentor.profilePicture">{{ mentor.firstName.charAt(0) }}{{ mentor.lastName.charAt(0) }}</span>
            </div>
            <div class="profile-details">
              <h1 class="profile-name">{{ mentor.firstName }} {{ mentor.lastName }}</h1>
              <p class="profile-title">{{ mentor.position }} at {{ mentor.company }}</p>
              <div class="profile-stats">
                <div class="stat">
                  <span class="stat-value">⭐ {{ mentor.rating }}</span>
                  <span class="stat-label">Rating</span>
                </div>
                <div class="stat">
                  <span class="stat-value">{{ mentor.totalSessions }}</span>
                  <span class="stat-label">Sessions</span>
                </div>
                <div class="stat">
                  <span class="stat-value">₹{{ mentor.hourlyRate }}/hr</span>
                  <span class="stat-label">Rate</span>
                </div>
              </div>
              <div class="profile-actions">
                <button class="btn-primary" (click)="submitBooking()">Book Session</button>
                <button class="btn-secondary">Message</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Main Content Grid -->
        <div class="profile-content-grid">
          <!-- Left Column -->
          <div class="profile-left">
            <!-- About Section -->
            <div class="profile-card">
              <h2>About</h2>
              <p>{{ mentor.bio }}</p>
            </div>

            <!-- Experience Section -->
            <div class="profile-card">
              <h2>Experience</h2>
              <div class="experience-item">
                <div class="experience-header">
                  <h3>{{ mentor.position }}</h3>
                  <p class="company">{{ mentor.company }}</p>
                  <p class="duration">Current</p>
                </div>
              </div>
            </div>

            <!-- Education Section -->
            <div class="profile-card" *ngIf="mentor.education && mentor.education.length > 0">
              <h2>Education</h2>
              <div class="education-list">
                <div class="education-item" *ngFor="let edu of mentor.education">
                  <h3>{{ edu.degree }}</h3>
                  <p class="institution">{{ edu.institution }}</p>
                  <p class="year">{{ edu.year }}</p>
                </div>
              </div>
            </div>

            <!-- Certifications Section -->
            <div class="profile-card" *ngIf="mentor.certifications && mentor.certifications.length > 0">
              <h2>Licenses & Certifications</h2>
              <div class="certifications-list">
                <div class="certification-item" *ngFor="let cert of mentor.certifications">
                  <h3>{{ cert.name }}</h3>
                  <p class="issuer">{{ cert.issuer }}</p>
                  <p class="date">{{ cert.date }}</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Right Column -->
          <div class="profile-right">
            <!-- Skills Section -->
            <div class="profile-card">
              <h2>Skills</h2>
              <div class="skills-list">
                <span class="skill-tag" *ngFor="let skill of mentor.expertise">
                  {{ skill }}
                </span>
              </div>
            </div>

            <!-- Availability Section -->
            <div class="profile-card">
              <h2>Availability</h2>
              <div class="availability-info">
                <p class="availability-status" [class.available]="mentor.isAvailable">
                  {{ mentor.isAvailable ? 'Available for sessions' : 'Currently unavailable' }}
                </p>
                <div class="availability-calendar">
                  <div class="day" *ngFor="let day of getAvailabilityDays()">
                    <span class="day-name">{{ day.name }}</span>
                    <div class="day-time" [class.available]="day.available">
                      <div *ngIf="day.available && day.timeSlots.length > 0" class="time-slots">
                        <div *ngFor="let slot of day.timeSlots" class="time-slot">
                          {{ formatTime(slot.startTime) }} - {{ formatTime(slot.endTime) }}
                        </div>
                      </div>
                      <span *ngIf="!day.available" class="not-available">Not Available</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Contact Section -->
            <div class="profile-card" *ngIf="mentor.linkedinUrl">
              <h2>Contact</h2>
              <div class="contact-info">
                <a [href]="mentor.linkedinUrl" target="_blank" class="linkedin-link">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                  </svg>
                  View LinkedIn Profile
                </a>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
  </div>
</div>

<!-- Edit Profile Modal -->
<app-edit-mentor-profile-modal
	[isVisible]="showEditProfileModal"
	[profileData]="editProfileData"
	(save)="onProfileSave($event)"
	(close)="onProfileClose()">
</app-edit-mentor-profile-modal>

<!-- Toast Notification -->
<div class="toast-notification" [class.success]="isSuccessToast" [class.error]="!isSuccessToast" [class.show]="showToast">
	<div class="toast-icon">
		<span *ngIf="isSuccessToast">✅</span>
		<span *ngIf="!isSuccessToast">❌</span>
	</div>
	<div class="toast-message">{{ toastMessage }}</div>
	<button class="toast-close" (click)="hideToast()">×</button>
</div>