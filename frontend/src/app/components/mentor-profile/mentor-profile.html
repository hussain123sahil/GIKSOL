<!-- Own Profile with Sidebar -->
<div class="mentor-profile-shell" *ngIf="isOwnProfile">
	<app-mentor-sidebar class="sidebar-pane" (navigate)="router.navigate([$event])"></app-mentor-sidebar>
	<div class="mentor-profile-container main-pane">
		<div class="profile-content">
			<div class="container">
				<h1 class="page-title">My Profile</h1>
				
				<!-- Loading State -->
				<div *ngIf="isLoading" class="loading-state">
					<div class="loading-spinner"></div>
					<p>Loading your profile...</p>
				</div>

				<!-- Mentor Profile -->
				<div *ngIf="!isLoading && mentor" class="profile-layout">
					<!-- Left Column - Profile Info -->
					<div class="profile-sidebar">
						<div class="profile-card">
							<div class="mentor-avatar">
								<img [src]="mentor.profilePicture" [alt]="mentor.firstName + ' ' + mentor.lastName" *ngIf="mentor.profilePicture">
								<span *ngIf="!mentor.profilePicture">{{ mentor.firstName.charAt(0) }}{{ mentor.lastName.charAt(0) }}</span>
							</div>
							<h2>{{ mentor.firstName }} {{ mentor.lastName }}</h2>
							<p class="position">{{ mentor.position }}</p>
							<p class="company">{{ mentor.company }}</p>
							
							<div class="mentor-stats">
								<div class="stat">
									<span class="rating">⭐ {{ mentor.rating }}</span>
									<small>Rating</small>
								</div>
								<div class="stat">
									<span class="sessions">{{ mentor.totalSessions }}</span>
									<small>Sessions</small>
								</div>
								<div class="stat">
									<span class="rate">${{ mentor.hourlyRate }}</span>
									<small>Per Hour</small>
								</div>
							</div>

							<div class="availability">
								<h4>Availability</h4>
								<p>{{ getAvailabilityText() }}</p>
							</div>

							<div class="expertise">
								<h4>Expertise</h4>
								<div class="expertise-tags">
									<span class="expertise-tag" *ngFor="let skill of mentor.expertise">
										{{ skill }}
									</span>
								</div>
							</div>

							<div class="social-links" *ngIf="mentor.linkedinUrl">
								<a [href]="mentor.linkedinUrl" target="_blank" class="linkedin-link">
									LinkedIn Profile
								</a>
							</div>
						</div>
					</div>

					<!-- Right Column - Detailed Info -->
					<div class="profile-main">
						<!-- Bio Section -->
						<div class="profile-section">
							<h3>About Me</h3>
							<p>{{ mentor.bio }}</p>
						</div>

						<!-- Education Section -->
						<div class="profile-section" *ngIf="mentor.education && mentor.education.length > 0">
							<h3>Education</h3>
							<div class="education-list">
								<div class="education-item" *ngFor="let edu of mentor.education">
									<h4>{{ edu.degree }}</h4>
									<p class="institution">{{ edu.institution }}</p>
									<span class="year">{{ edu.year }}</span>
								</div>
							</div>
						</div>

						<!-- Certifications Section -->
						<div class="profile-section" *ngIf="mentor.certifications && mentor.certifications.length > 0">
							<h3>Certifications</h3>
							<div class="certifications-list">
								<div class="certification-item" *ngFor="let cert of mentor.certifications">
									<h4>{{ cert.name }}</h4>
									<p class="issuer">{{ cert.issuer }}</p>
									<span class="date">{{ cert.date }}</span>
								</div>
							</div>
						</div>

						<!-- Availability Details -->
						<div class="profile-section">
							<h3>Weekly Availability</h3>
							<div class="availability-grid">
								<div class="day-availability" *ngFor="let day of getAvailabilityDays()">
									<span class="day">{{ day.name }}</span>
									<span class="time" [class.unavailable]="!day.available">
										{{ day.available ? day.start + ' - ' + day.end : 'Not Available' }}
									</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Other Mentor's Profile without Sidebar -->
<div class="mentor-profile-container" *ngIf="!isOwnProfile">
  <!-- Header -->
  <header class="page-header">
    <div class="container">
      <div class="header-content">
        <button class="btn btn-secondary" (click)="goBack()">← Back to Mentors</button>
        <h1>Mentor Profile</h1>
        <div></div>
      </div>
    </div>
  </header>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Loading mentor profile...</p>
  </div>

  <!-- Mentor Profile -->
  <div *ngIf="!isLoading && mentor" class="profile-content">
    <div class="container">
      <div class="profile-layout">
        <!-- Left Column - Profile Info -->
        <div class="profile-sidebar">
          <div class="profile-card">
            <div class="mentor-avatar">
              <img [src]="mentor.profilePicture" [alt]="mentor.firstName + ' ' + mentor.lastName" *ngIf="mentor.profilePicture">
              <span *ngIf="!mentor.profilePicture">{{ mentor.firstName.charAt(0) }}{{ mentor.lastName.charAt(0) }}</span>
            </div>
            <h2>{{ mentor.firstName }} {{ mentor.lastName }}</h2>
            <p class="position">{{ mentor.position }}</p>
            <p class="company">{{ mentor.company }}</p>
            
            <div class="mentor-stats">
              <div class="stat">
                <span class="rating">⭐ {{ mentor.rating }}</span>
                <small>Rating</small>
              </div>
              <div class="stat">
                <span class="sessions">{{ mentor.totalSessions }}</span>
                <small>Sessions</small>
              </div>
              <div class="stat">
                <span class="rate">${{ mentor.hourlyRate }}</span>
                <small>Per Hour</small>
              </div>
            </div>

            <div class="availability">
              <h4>Availability</h4>
              <p>{{ getAvailabilityText() }}</p>
            </div>

            <div class="expertise">
              <h4>Expertise</h4>
              <div class="expertise-tags">
                <span class="expertise-tag" *ngFor="let skill of mentor.expertise">
                  {{ skill }}
                </span>
              </div>
            </div>

            <div class="social-links" *ngIf="mentor.linkedinUrl">
              <a [href]="mentor.linkedinUrl" target="_blank" class="linkedin-link">
                LinkedIn Profile
              </a>
            </div>

            <!-- Booking Button -->
            <button class="btn btn-primary btn-large" (click)="toggleBookingForm()" *ngIf="mentor.isAvailable">
              Book a Session
            </button>
            <p class="unavailable-text" *ngIf="!mentor.isAvailable">
              Currently not available for new sessions
            </p>
          </div>
        </div>

        <!-- Right Column - Detailed Info -->
        <div class="profile-main">
          <!-- Bio Section -->
          <div class="profile-section">
            <h3>About Me</h3>
            <p>{{ mentor.bio }}</p>
          </div>

          <!-- Education Section -->
          <div class="profile-section" *ngIf="mentor.education && mentor.education.length > 0">
            <h3>Education</h3>
            <div class="education-list">
              <div class="education-item" *ngFor="let edu of mentor.education">
                <h4>{{ edu.degree }}</h4>
                <p class="institution">{{ edu.institution }}</p>
                <span class="year">{{ edu.year }}</span>
              </div>
            </div>
          </div>

          <!-- Certifications Section -->
          <div class="profile-section" *ngIf="mentor.certifications && mentor.certifications.length > 0">
            <h3>Certifications</h3>
            <div class="certifications-list">
              <div class="certification-item" *ngFor="let cert of mentor.certifications">
                <h4>{{ cert.name }}</h4>
                <p class="issuer">{{ cert.issuer }}</p>
                <span class="date">{{ cert.date }}</span>
              </div>
            </div>
          </div>

          <!-- Availability Details -->
          <div class="profile-section">
            <h3>Weekly Availability</h3>
            <div class="availability-grid">
              <div class="day-availability" *ngFor="let day of getAvailabilityDays()">
                <span class="day">{{ day.name }}</span>
                <span class="time" [class.unavailable]="!day.available">
                  {{ day.available ? day.start + ' - ' + day.end : 'Not Available' }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Booking Form Modal -->
  <div class="booking-modal" *ngIf="showBookingForm" (click)="closeBookingModal($event)">
    <div class="booking-modal-content" (click)="$event.stopPropagation()">
      <div class="booking-modal-header">
        <h3>Book a Session with {{ mentor?.firstName }} {{ mentor?.lastName }}</h3>
        <button class="close-btn" (click)="toggleBookingForm()">&times;</button>
      </div>
      
      <form (ngSubmit)="submitBookingRequest()" class="booking-form">
        <div class="form-group">
          <label for="preferredDate">Preferred Date</label>
          <input 
            type="date" 
            id="preferredDate" 
            [(ngModel)]="bookingForm.preferredDate" 
            name="preferredDate"
            required
          >
        </div>

        <div class="form-group">
          <label for="preferredTime">Preferred Time</label>
          <select 
            id="preferredTime" 
            [(ngModel)]="bookingForm.preferredTime" 
            name="preferredTime"
            required
          >
            <option value="">Select a time</option>
            <option *ngFor="let time of availableTimeSlots" [value]="time">
              {{ time }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label for="sessionDuration">Session Duration</label>
          <select 
            id="sessionDuration" 
            [(ngModel)]="bookingForm.sessionDuration" 
            name="sessionDuration"
            required
          >
            <option value="30">30 minutes</option>
            <option value="60">1 hour</option>
            <option value="90">1.5 hours</option>
            <option value="120">2 hours</option>
          </select>
        </div>

        <div class="form-group">
          <label for="sessionType">Session Type</label>
          <select 
            id="sessionType" 
            [(ngModel)]="bookingForm.sessionType" 
            name="sessionType"
            required
          >
            <option value="video">Video Call</option>
            <option value="phone">Phone Call</option>
            <option value="in-person">In-Person</option>
          </select>
        </div>

        <div class="form-group">
          <label for="notes">Additional Notes (Optional)</label>
          <textarea 
            id="notes" 
            [(ngModel)]="bookingForm.notes" 
            name="notes"
            rows="4"
            placeholder="Tell the mentor what you'd like to discuss..."
          ></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="toggleBookingForm()">
            Cancel
          </button>
          <button type="submit" class="btn btn-primary">
            Send Booking Request
          </button>
        </div>
      </form>
    </div>
  </div>
</div>